---
import ThemeButton from "../components/ThemeButton.vue";
const { pageTitle } = Astro.props;
---

<!-- This will be the layout for all the pages -->
<html>
    <head>
        <meta charset="utf-8" />
        <title>{"Host4ideas's " + pageTitle || "Host4ideas's portfolio"}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="preload" href="https://fonts.googleapis.com" />
        <link rel="preload" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Montserrat&family=Source+Sans+Pro&display=swap"
            rel="stylesheet"
        />
        <style is:global>
            /* Apply globally */
            :root {
                --body-bg: rgba(255, 255, 255);
                --font-color: rgb(0, 0, 0);
                --card-bg: rgba(97, 134, 133, 1);
                --nav-icon-bg-color: rgba(254, 251, 216, 1);
                --scrollbar-track-hover: rgba(97, 134, 133, 0.4);
                --scrollbar-thumb: rgba(97, 134, 133, 0.8);
                --scrollbar-thumb-hover: rgba(97, 134, 133, 1);
                --separator: rgba(97, 134, 133, 0.5);
                --link: rgba(97, 134, 133, 1);
                --button-link-shadow: rgba(97, 134, 133, 0.4);
                --message-bg: #f2f2f2;
                --send-button-hover: #45a049;
                --send-button: #267c29;
            }

            /* Switch to different css variables if data-theme="dark" */
            [data-theme="dark"] {
                --body-bg: rgba(44, 51, 51);
                --font-color: rgba(231, 246, 242, 1);
                --card-bg: rgba(97, 134, 133, 1);
                --nav-icon-bg-color: rgba(254, 251, 216, 1);
                --scrollbar-track-hover: rgba(97, 134, 133, 0.4);
                --scrollbar-thumb: rgba(97, 134, 133, 0.8);
                --scrollbar-thumb-hover: rgba(97, 134, 133, 1);
                --separator: rgba(165, 201, 202, 0.5);
                --link: rgba(97, 134, 133, 1);
                --button-link-shadow: rgba(97, 134, 133, 0.4);
                --message-bg: #395b64;
                --send-button-hover: #45a049;
                --send-button: #267c29;
            }

            /*
            
            -- Light theme

            RGBA: rgba(213, 244, 230, 1)

            RGBA: rgba(128, 206, 214, 1)

            RGBA: rgba(254, 251, 216, 1)

            RGBA: rgba(97, 134, 133, 1)

            -- Dark theme

            HEX: #2C3333
            RGBA: rgba(44, 51, 51, 1)

            HEX: #395B64
            RGBA: rgba(57, 91, 100, 1)

            HEX: #A5C9CA
            RGBA: rgba(165, 201, 202, 1)

            HEX: #E7F6F2
            RGBA: rgba(231, 246, 242, 1)

            */

            /**** Scrollbar *****/
            /* width */
            .custom-scrollbar::-webkit-scrollbar {
                width: 12px;
            }

            .custom-scrollbar::-webkit-scrollbar-track {
                /* border-top-right-radius: 5px;
                    border-bottom-right-radius: 5px; */
                border-radius: 5px;
                background-color: rgba(0, 0, 0, 0);
            }

            .custom-scrollbar::-webkit-scrollbar-track:hover {
                background-color: var(--scrollbar-track-hover);
            }

            /* Handle */
            .custom-scrollbar::-webkit-scrollbar-thumb {
                /* border-top-right-radius: 5px;
                    border-bottom-right-radius: 5px; */
                box-shadow: inset 0 0 6px var(--scrollbar-thumb);
                background-color: var(--scrollbar-thumb);
                border: 3px solid rgba(0, 0, 0, 0);
                background-clip: content-box;
                border-radius: 9999px;
            }

            /* Handle on hover */
            .custom-scrollbar::-webkit-scrollbar-thumb:hover {
                background-color: var(--scrollbar-thumb-hover);
            }

            /**** Text *****/
            .title {
                font-family: "Montserrat", "Lucida Sans Unicode",
                    "Lucida Grande", "Lucida Sans", Arial, sans-serif;
                text-align: center;
                font-weight: 800;
                font-size: 3rem;
                color: var(--font-color);
            }

            .sub-title {
                font-family: "Montserrat", "Lucida Sans Unicode",
                    "Lucida Grande", "Lucida Sans", Arial, sans-serif;
                text-align: center;
                font-weight: 600;
                font-size: 2rem;
            }

            .text-container {
                margin-bottom: 50px;
                padding: 20px;
                font-size: 1.2rem;
                color: var(--font-color);
            }

            .centered-text {
                text-align: center;
            }

            .separator {
                border-top: 1px solid var(--separator);
            }

            /**** Links *****/
            .link {
                text-decoration: none;
                font-weight: 600;
                color: var(--link);
            }

            .link:hover {
                text-decoration: underline;
            }

            .button-link {
                transition: transform 500ms;
                box-shadow: rgba(97, 134, 133, 0.4) 2px 2px;
                animation: box-shadow-animation-out 500ms;
            }

            .button-link:hover {
                transform: scale(1.1);
                animation: box-shadow-animation-in 500ms forwards;
            }

            @keyframes box-shadow-animation-in {
                from {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px;
                }

                15% {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px,
                        rgba(97, 134, 133, 0.3) 4px 4px;
                }

                20% {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px,
                        rgba(97, 134, 133, 0.3) 4px 4px,
                        rgba(97, 134, 133, 0.2) 8px 8px;
                }

                45% {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px,
                        rgba(97, 134, 133, 0.3) 4px 4px,
                        rgba(97, 134, 133, 0.2) 8px 8px,
                        rgba(97, 134, 133, 0.1) 10px 10px;
                }

                to {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px,
                        rgba(97, 134, 133, 0.3) 4px 4px,
                        rgba(97, 134, 133, 0.2) 8px 8px,
                        rgba(97, 134, 133, 0.1) 10px 10px,
                        rgba(97, 134, 133, 0.05) 12px 12px;
                }
            }

            @keyframes box-shadow-animation-out {
                to {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px;
                }

                45% {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px,
                        rgba(97, 134, 133, 0.3) 4px 4px;
                }

                20% {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px,
                        rgba(97, 134, 133, 0.3) 4px 4px,
                        rgba(97, 134, 133, 0.2) 8px 8px;
                }

                15% {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px,
                        rgba(97, 134, 133, 0.3) 4px 4px,
                        rgba(97, 134, 133, 0.2) 8px 8px,
                        rgba(97, 134, 133, 0.1) 10px 10px;
                }

                from {
                    box-shadow: rgba(97, 134, 133, 0.4) 2px 2px,
                        rgba(97, 134, 133, 0.3) 4px 4px,
                        rgba(97, 134, 133, 0.2) 8px 8px,
                        rgba(97, 134, 133, 0.1) 10px 10px,
                        rgba(97, 134, 133, 0.05) 12px 12px;
                }
            }
        </style>

        <style>
            /* Apply locally */

            html,
            body {
                margin: 0;
            }

            body {
                font-family: "Source Sans Pro", "Lucida Sans Unicode",
                    "Lucida Grande", "Lucida Sans", Arial, sans-serif;
                font-weight: 300;
                /* Arriba | Derecha | Abajo | Izquierda */
                padding: 1rem 2rem 2rem 2rem;
                min-width: 320px;
                min-height: 90vh;
                background-color: var(--body-bg);
            }

            nav {
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: space-evenly;
                margin-bottom: 50px;
            }

            #homeLink {
                background-image: url("/assets/icons/icons8-death-star-100.png");
            }

            #aboutLink {
                background-image: url("/assets/icons/icons8-baby-yoda.svg");
            }

            #projectsLink {
                background-image: url("/assets/icons/light-saber.png");
                background-size: 75%;
            }

            #contactLink {
                background-image: url("/assets/icons/icons8-boba-96.png");
            }

            #githubLink {
                background-color: var(--font-color);
                -webkit-mask-image: url("/assets/icons/github-brands.svg");
                mask-image: url("/assets/icons/github-brands.svg");
            }

            #linkedinLink {
                background-color: var(--font-color);
                -webkit-mask-image: url("/assets/icons/linkedin-brands.svg");
                mask-image: url("/assets/icons/linkedin-brands.svg");
            }

            /* Header */
            .page-header {
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .a,
            .b {
                margin-left: auto;
            }

            /* Nav */
            .nav-container {
                margin-top: 60px;
                margin-bottom: 45px;
            }

            .nav-links a {
                height: 2.5rem;
                width: 2.5rem;
                margin-bottom: 15px;
                padding: 7px;
                border: 1px rgba(97, 134, 133, 0.5) solid;
                border-radius: 5px;
                background-color: rgba(254, 251, 216, 1);
                background-size: 90%;
                background-repeat: no-repeat;
                background-position: center;
            }

            .nav-links div {
                display: flex;
                flex-direction: column;
                align-items: center;
                color: var(--font-color);
            }

            /* Footer */
            footer {
                margin-top: 60px;
            }

            footer > nav {
                justify-content: center;
                /* Arriba | Derecha | Abajo | Izquierda */
                margin: 80px 0 60px 0;
                padding: 0;
            }

            .footer-links {
                margin-top: 50px;
            }

            .footer-links a {
                background-color: rgb(255, 255, 255, 0);
                border: none;
                margin-bottom: 0;
                padding: 0;
            }

            .footer-link {
                transition: transform 500ms;
                /* Arriba | Derecha | Abajo | Izquierda */
                margin: 0 25px 0 25px;
                background-repeat: no-repeat;
                -webkit-mask-repeat: no-repeat;
                mask-repeat: no-repeat;
            }

            .footer-link:hover {
                transform: scale(1.1);
            }
        </style>
    </head>

    <body class="custom-scrollbar">
        <header class="page-header">
            <h1 class="title a">{pageTitle}</h1>
            <ThemeButton class="b" />
        </header>
        <div class="nav-container">
            <nav class="nav-links">
                <div>
                    <a
                        id="homeLink"
                        class="button-link"
                        href="/"
                        title="Home page 🏠"></a>
                    Home
                </div>
                <div>
                    <a
                        id="aboutLink"
                        class="button-link"
                        href="/about"
                        title="More about me 🤓"></a>
                    About me
                </div>
                <div>
                    <a
                        id="projectsLink"
                        class="button-link"
                        href="/projects"
                        title="See my projects 🐱‍🏍"></a>
                    My projects
                </div>
                <div>
                    <a
                        id="contactLink"
                        class="button-link"
                        href="/contact"
                        title="Contact me 💌"></a>
                    Contact me
                </div>
            </nav>
            <div class="separator"></div>
        </div>
        <main>
            <slot />
            <!-- your content is injected here -->
        </main>
        <footer>
            <div class="separator"></div>
            <nav class="footer-links nav-links">
                <a
                    id="githubLink"
                    class="footer-link"
                    href="https://github.com/host4ideas"
                    target="_blank"
                    title="Check my GitHub"></a>
                <a
                    id="linkedinLink"
                    class="footer-link"
                    href="https://www.linkedin.com/in/felix-martinez-bendicho/"
                    target="_blank"
                    title="Check my LinkedIn"></a>
            </nav>
        </footer>
        <script type="text/javascript" is:inline>
            /*
                The above script will add the class dark to the html element and set the local storage theme to dark if:
        
                the user prefers dark mode and doesn’t have a local storage theme defined, or
                the user have a local storage theme set to dark.
                If none of the above conditions are met, then the script will remove the class dark from the html element and set the local storage theme to light.
            */
            //determines if the user has a set theme
            function detectColorScheme() {
                var theme = "light"; //default to light

                //local storage is used to override OS theme settings
                if (window.localStorage.getItem("theme")) {
                    if (window.localStorage.getItem("theme") == "dark") {
                        theme = "dark";
                    }
                } else if (!window.matchMedia) {
                    //matchMedia method not supported
                    return false;
                } else if (
                    window.matchMedia("(prefers-color-scheme: dark)").matches
                ) {
                    //OS theme setting detected as dark
                    theme = "dark";
                }

                //dark theme preferred, set document with a `data-theme` attribute
                if (theme == "dark") {
                    document.documentElement.setAttribute("data-theme", "dark");
                    document.getElementById("dn").checked = true;
                }
            }
            detectColorScheme();

            document.getElementById("dn").addEventListener("change", (e) => {
                if (e.target.checked) {
                    window.localStorage.setItem("theme", "dark");
                    document.documentElement.setAttribute("data-theme", "dark");
                } else {
                    window.localStorage.setItem("theme", "light");
                    document.documentElement.setAttribute(
                        "data-theme",
                        "light"
                    );
                }
            });

            /* Script to load local font resources if cloud resources are not available */
            function loadFont(name, url) {
                return new Promise((res, rej) => {
                    setTimeout(() => {
                        rej(`Font ${name} loading timeout exceeded`);
                    }, 2000);

                    const f = new FontFace(name, url);
                    f.load()
                        .then((loadedFont) => {
                            document.fonts.add(loadedFont);
                            res(`Font ${name} loaded`);
                        })
                        .catch((error) => {
                            rej(error.message);
                        });
                });
            }

            try {
                // Check if the custom Google fonts are available after 1000ms the window has loaded
                setTimeout(() => {
                    if (!document.fonts.check("10px Montserrat")) {
                        loadFont(
                            "Montserrat",
                            "url(/assets/fonts/Montserrat-VariableFont_wght.ttf)"
                        );
                    }
                    if (!document.fonts.check("10px Source Sans Pro")) {
                        loadFont(
                            "Source Sans Pro",
                            "url(/assets/fonts/SourceSansPro-Regular.ttf)"
                        );
                    }
                }, 1000);
            } catch (e) {
                console.log(e.message);
            }
        </script>
    </body>
</html>
